function HomeController($scope){function init(){container=document.createElement("div"),document.body.appendChild(container),renderer=new THREE.WebGLRenderer,renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(55,window.innerWidth/window.innerHeight,.5,3e6),camera.position.set(2e3,750,2e3),controls=new THREE.OrbitControls(camera,renderer.domElement),controls.enablePan=!1,controls.minDistance=1e3,controls.maxDistance=5e3,controls.maxPolarAngle=.495*Math.PI,controls.target.set(0,500,0),scene.add(new THREE.AmbientLight(4473924));var light=new THREE.DirectionalLight(16777147,1);light.position.set(-1,1,-1),scene.add(light),waterNormals=(new THREE.TextureLoader).load("/content/imgs/textures/waternormals.jpg"),waterNormals.wrapS=waterNormals.wrapT=THREE.RepeatWrapping,water=new THREE.Water(renderer,camera,scene,{textureWidth:512,textureHeight:512,waterNormals:waterNormals,alpha:1,sunDirection:light.position.clone().normalize(),sunColor:16777215,waterColor:7695,distortionScale:50}),mirrorMesh=new THREE.Mesh(new THREE.PlaneBufferGeometry(500*parameters.width,500*parameters.height),water.material),mirrorMesh.add(water),mirrorMesh.rotation.x=.5*-Math.PI,scene.add(mirrorMesh);var cubeMap=new THREE.CubeTexture([]);cubeMap.format=THREE.RGBFormat;var loader=new THREE.ImageLoader;loader.load("/content/imgs/textures/skyboxsun25degtest.png",function(image){var getSide=function(x,y){var size=1024,canvas=document.createElement("canvas");canvas.width=size,canvas.height=size;var context=canvas.getContext("2d");return context.drawImage(image,-x*size,-y*size),canvas};cubeMap.images[0]=getSide(2,1),cubeMap.images[1]=getSide(0,1),cubeMap.images[2]=getSide(1,0),cubeMap.images[3]=getSide(1,2),cubeMap.images[4]=getSide(1,1),cubeMap.images[5]=getSide(3,1),cubeMap.needsUpdate=!0});var cubeShader=THREE.ShaderLib.cube;cubeShader.uniforms.tCube.value=cubeMap;var skyBoxMaterial=new THREE.ShaderMaterial({fragmentShader:cubeShader.fragmentShader,vertexShader:cubeShader.vertexShader,uniforms:cubeShader.uniforms,depthWrite:!1,side:THREE.BackSide}),skyBox=new THREE.Mesh(new THREE.BoxGeometry(1e6,1e6,1e6),skyBoxMaterial);scene.add(skyBox);for(var geometry=new THREE.IcosahedronGeometry(400,4),i=0,j=geometry.faces.length;i<j;i++)geometry.faces[i].color.setHex(16777215*Math.random());var material=new THREE.MeshPhongMaterial({vertexColors:THREE.FaceColors,shininess:100,envMap:cubeMap});sphere=new THREE.Mesh(geometry,material),scene.add(sphere)}function animate(){requestAnimationFrame(animate),render()}function render(){var time=.001*performance.now();sphere.position.y=500*Math.sin(time)+250,sphere.rotation.x=.5*time,sphere.rotation.z=.51*time,water.material.uniforms.time.value+=1/60,controls.update(),water.render(),renderer.render(scene,camera)}var container,camera,scene,renderer,sphere,waterNormals,parameters={width:2e3,height:2e3,widthSegments:250,heightSegments:250,depth:1500,param:4,filterparam:1};$scope.$watch("$viewContentLoaded",function(){Detector.webgl?(init(),animate()):(Detector.addGetWebGLMessage(),document.getElementById("container").innerHTML="")}),$scope.$on("$destroy",function(){})}function AppController($router,$scope){$router.config([{path:"/",component:"home"}]),$scope.$on("$locationChangeSuccess",function(next,current){var currLocation=$router.lastNavigationAttempt;console.log("changesuccess ",currLocation),setTimeout(function(){},150)})}angular.module("Yakusa666.home",[]).controller("HomeController",HomeController);var app=angular.module("Yakusa666",["ngNewRouter","ngAnimate","Yakusa666.home"]);app.config(function($locationProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!1})}),app.controller("AppController",AppController);